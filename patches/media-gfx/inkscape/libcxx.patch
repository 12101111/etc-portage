diff --git a/src/object/object-set.cpp b/src/object/object-set.cpp
index c4417ed..56364f3 100644
--- a/src/object/object-set.cpp
+++ b/src/object/object-set.cpp
@@ -255,7 +255,7 @@ Inkscape::XML::Node *ObjectSet::topRepr() const
         return nullptr;
     }
 
-#ifdef __APPLE__
+#ifdef _LIBCPP_VERSION
     // workaround for
     // static_assert(__is_cpp17_forward_iterator<_ForwardIterator>::value
     auto const n = std::vector<Inkscape::XML::Node *>(nodes.begin(), nodes.end());

diff --git a/tests/zfs-tests/cmd/statx.c b/tests/zfs-tests/cmd/statx.c
index 89939f6..f378e4d 100644
--- a/tests/zfs-tests/cmd/statx.c
+++ b/tests/zfs-tests/cmd/statx.c
@@ -29,6 +29,9 @@
 #include <fcntl.h>
 #include <sys/syscall.h>
 #include <unistd.h>
+#ifndef S_IFMT
+#define S_IFMT 0170000
+#endif
 
 /*
  * statx() may be available in the kernel, but not in the libc, so we build
